django-admin startproject project1

启动服务
python3 manage.py runserver (port default 8000)
创建应用
python3 manage.py startapp
数据库迁移
python3 manage.py migrate

列出所有django子命令
python manage.py 

在runserver 启动终端 ctrl + c 关闭
在终端 sudo lsof -i port 查询django 进程ID
kill -9 id 结束进程

wsgi.py web服务网关配置文件
urls.py 主路由配置
settings.py 项目的配置文件

配置项格式 BASE_DIR = 'xxx'
全部大写


# protocol ://hostname[:port]/path[?query][#fragment]

path()
from django.urls import path

path(route,views,name=None)
route:匹配的路径
views:对应视图处理函数名称
name:为地址起别名，在模版地址中反向解析时使用

路由配置 - path - 转换器
类型：str  匹配除了'/'之外的非空字符串
     # "v/user/<str:username>" /v1/users/godson
     int   匹配0或者任何正整数，返回一个int
     # "page/<int:page>" /page/100
     slug  匹配任意由ASCII字母或数字以及连字符和下划线组成的短标签
     # "detail/<slug:sl>" /detail/this-is-django
     path  匹配非空字段，包括路径分隔符'/'
     # 'v1/users/<path:ph>' /v1/users/a/b/c

re_path()
re_path(reg,view,name=xx) (?P<name>pattern)
re_path(r'^(?P<x>\d{1,2})/(?P<op>\w+)/(?P<y>\d{1,2})$',views.cal_view),


HttpResponse(content="响应体"，content_type="响应体数据类型"，status="状态码")

if request.method == 'GET':
     pass
elif request.method == 'POST':
     pass


产生get的情景：  get通常用查询字符串（Query String）传递数据给服务器，不要传递敏感数据。
     ·地址栏输入URL，回车
     ·get:<a href="地址？参数=值&参数=值">
     ·form 表单的method 为 get
request.GET['参数名']
request.GET.get('参数名'，'默认值')
request.GET.getlist('参数名')

产生POST的情景：   常见的通过表单将数据传送给服务器
     ·向服务器提交大量/隐私数据
request.POST['参数名']
request.POST.get('参数名'，'默认值')
request.POST.getlist('参数名')
# 取消csrf认证，否则Django将会拒绝客户端发来的POST请求，报403响应

MVC AND MTC

M:模型 model  主要用于对数据库层的封装
V:视图 view   用于向用户展示结果 (什么数据、怎么显示）
C:控制 controller   用于请求、获取数据、返回结果（重要）
作用：降低模块间的耦合度（解耦）
浏览器/客户端  (响应)<--->{(请求)服务器（controller控制器）|<-----> 服务器（模型model）}<-------> 数据库
                                                     |
                                                     |<-------->服务器（视图view）        

M:模型 model 负责与数据库交互
T:模版层 Template 负责呈现内容到浏览器  负责html、css之类的东西
V:视图是核心 view  用于请求、获取数据、返回结果（重要）
T和V实际上就是分解了MVC中的V
（c：主路由）
作用：降低模块间的耦合度（解耦）
浏览器/客户端  (响应)<---------->{(请求)服务器（视图View)|<-----> 服务器（模型model）}<-------> 数据库
                                                     |
                                                     |<-------->服务器（模版Template）    
模版是可以根据字典数据动态变化变化的html网页
模版可以根据视图中传递的字典数据动态生成相应的HTML网页。


模版配置：BACKEND：模版引擎（怎么接受视图传过来的数据，怎么调用）
         DIRS：模版的搜索目录（一个或多个）

模版的加载方式：
**·通过loader获取模版，通过HttpResponse进行响应。**
from django.template import loader
#1. 通过loader加载模版
t = loader.get_template("模版文件名")
#2. 将t 转换乘html字符串
html=t.render(字典数据)
#3. 用响应的对象将转换的字符串内容返回给浏览器
return HttpResponse(html)
**·使用render()直接加载并响应模版**  (主要使用，简单)
from django.shortcuts import render
return render(request,'模版文件名',字典数据)



视图与模版之间的交互
将python变量封装到字典中传递到模版样例
def xxx_view(request):
    dic={
            "变量1"："值1"，
            "变量2"："值2",
    }
    return render(request,'xxx.html',dic)
模版中，我们可以用{{变量名}}的语法调用视图传进来变量
能传递到模版中的数据类型：str int list tuple dict func方法 obj实例化对象
{{变量名}}  {{变量名.index}}   {{变量名.key}}  {{对象.方法}}  {{函数名}}

{%标签%}  {%结束标签%}  {%if%}  {%else%} {%endif%}

{% for 变量 in 可迭代对象 %}    {% empty %} 可迭代对象无数据时填充的语句  {% endfor %}
内置变量 forloop  
forloop.counter(从1开始)
forloop.counter0(从0开始)